<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet author="Ijaj Inamdar" id="2022-02-10-CMP-6425-setup-v2.36">
        <update catalogName="system" schemaName="system" tableName="client_property_tbl">
            <column name="name" value="invoiceidrule" />
            <where>name = 'invoiceidrules'</where>
        </update>
    </changeSet>

    <changeSet author="Abhinav Shaha" id="2022-03-07-CMP-6524-setup-v2.36">
        <insert catalogName="log" schemaName="log" tableName="state_tbl">
            <column name="id" value="2010120" />
            <column name="name" value="Customer's Name is Missing or Invalid" />
            <column name="module" value="sub-code" />
            <column name="enabled" value="true" />
        </insert>
        <insert catalogName="log" schemaName="log" tableName="state_tbl">
            <column name="id" value="2010121" />
            <column name="name" value="Customer's Email is Missing or Invalid" />
            <column name="module" value="sub-code" />
            <column name="enabled" value="true" />
        </insert>
    </changeSet>

    <!-- Change system_type from 1 to 7 for Adyen -->
    <changeSet author="Abhinav Shaha" id="2022-03-02-CMP-6506-setup-v2.36">
        <update catalogName="system" schemaName="system" tableName="psp_tbl">
            <column name="system_type" value="7" />
            <where>id = 12</where>
        </update>
    </changeSet>

    <!-- Add APIKEY property for Adyen -->
    <changeSet author="Abhinav Shaha" id="2022-03-02-CMP-6506-setup-v2.36-2">
        <insert catalogName="system" schemaName="system" tableName="psp_property_tbl">
            <column name="pspid" value="12"/>
            <column name="name" value="APIKEY" />
            <column name="datatype" value="3" />
            <column name="ismandatory" value="true"/>
            <column name="category" value="8" />
            <column name="enabled" value="true" />
        </insert>
    </changeSet>

    <!-- Change system_type from 7 to 1 for Adyen -->
    <changeSet author="Abhinav Shaha" id="2022-03-02-CMP-6506-setup-v2.36-3">
        <update catalogName="system" schemaName="system" tableName="psp_tbl">
            <column name="system_type" value="1" />
            <where>id = 12</where>
        </update>
    </changeSet>

</databaseChangeLog>