
#Step 1: UPDATE Capture Amount
update log.transaction_tbl set captured = (amount+fee) where id in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102);

#Step 2: Update txnpassbook_tbl with status done for performedopt 2000
update log.txnpassbook_tbl set status = 'done' where transactionid in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077
and performedopt =2000;

#Step 3: insert requestedopt 5011 in txnpassbook_tbl
INSERT INTO log.txnpassbook_tbl (clientid, transactionid, amount, currencyid, requestedopt, performedopt, status, extref, extrefidentifier)
SELECT clientid, transactionid, amount, currencyid, 5011, null, 'done', '', 0 FROM log.txnpassbook_tbl where
transactionid in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077
and performedopt =2000 

#Step 4: insert performedopt 2001 in txnpassbook_tbl
INSERT INTO log.txnpassbook_tbl (clientid, transactionid, amount, currencyid, requestedopt, performedopt, status, extref, extrefidentifier)
SELECT clientid, transactionid, amount, currencyid, null, 2001, 'done',id, 'log.txnpassbook_tbl'  FROM log.txnpassbook_tbl where
transactionid in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077
and requestedopt =5011

#Step 5: insert 2001,4030 in message_tbl
insert into log.message_tbl (txnid,stateid) select id,2001 from log.transaction_tbl where id in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077;
insert into log.message_tbl (txnid,stateid) select id,4030 from log.transaction_tbl where id in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077;

#Step 6: Update stateid in sessionid

UPDATE log.session_tbl set stateid=4030 where id in (select sessionid from log.transaction_tbl tt where id in (33052961,33094273,33187754,34462148,34759295,34958045,35411703,35888130,35943025,36265451,36531824,36742355,37381495,37557520,37951494,38188022,38396314,38476828,38548743,38590763,38777746,39156484,39176335,39461631,39995032,40087988,40218424,40220425,40672160,40989021,41002503,41005514,41652974,41660344,41688079,41788691,41792526,41985005,42000077,42046100,42138915,42173111,42286241,42448404,42471393,42550729,42572102) and clientid=10077); 


