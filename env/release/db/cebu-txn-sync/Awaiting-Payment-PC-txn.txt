
#Step 1: UPDATE Capture Amount
update log.transaction_tbl set captured = (amount+fee) where id in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760);

#Step 2: Update txnpassbook_tbl with status done for performedopt 2000
update log.txnpassbook_tbl set status = 'done' where transactionid in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077 and performedopt =2000;

#Step 3: insert requestedopt 5011 in txnpassbook_tbl
INSERT INTO log.txnpassbook_tbl (clientid, transactionid, amount, currencyid, requestedopt, performedopt, status, extref, extrefidentifier)
SELECT clientid, transactionid, amount, currencyid, 5011, null, 'done', '', 0 FROM log.txnpassbook_tbl where
transactionid in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077 and performedopt =2000 

#Step 4: insert performedopt 2001 in txnpassbook_tbl
INSERT INTO log.txnpassbook_tbl (clientid, transactionid, amount, currencyid, requestedopt, performedopt, status, extref, extrefidentifier)
SELECT clientid, transactionid, amount, currencyid, null, 2001, 'done',id, 'log.txnpassbook_tbl'  FROM log.txnpassbook_tbl where
transactionid in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077
and requestedopt =5011

#Step 5: insert 2001,4030 in message_tbl
insert into log.message_tbl (txnid,stateid) select id,2001 from log.transaction_tbl where id in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077;
insert into log.message_tbl (txnid,stateid) select id,4030 from log.transaction_tbl where id in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077 and id not in (select txnid from log.message_tbl mt where txnid in  (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and stateid in (4030));


#Step 6: Update stateid in sessionid

UPDATE log.session_tbl set stateid=4030 where id in (select sessionid from log.transaction_tbl tt where id in (36339414,37168953,37271123,37280229,38388042,38361617,38658855,39722383,39718881,29762843,30590982,30606310,31488616,31575111,31876369,32705283,32793767,32810082,32927944,33766521,39804391,39824989,39827539,39830594,39826395,39939614,39959203,39966402,39977461,39991253,39994062,40108019,40117550,40299842,40335420,40420349,40560591,40576118,40579224,40582012,40536453,40544035,40568313,40694560,40699451,41085722,41087878,41102008,42167870,42174304,42176466,42177760,42178258,42182223,42185335,42186963,42191019,42192516,42193695,42203654,42203868,42204447,42204493,42204611,42204672,42204700,42204932,42205296,42205300,42205459,42205583,42205955,42206019,42206348,42206421,42206422,42206930,42207622,42207932,42208255,42208256,42208320,42208540,42208884,42208986,42209010,42209045,42209155,42209260,42209265,42209294,42209386,42209407,42209741,42209977,42210018,42210039,42210126,42210138,42210243,42210862,42210743,42210761,42210868,42210913,42210915,42210974,42211049,42204459,42205446,42208659,42208757,42292447,42309520,42616789,42660484,42678318,42691328,42706115,42672760) and clientid=10077); 


