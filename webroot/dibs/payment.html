<PML_META nospace="true">
<?xml version="1.0" encoding="ISO-8859-15"?>
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.openmobilealliance.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" PML_xml:lang="cgi.lang">
<head>
	<title><PML_VAL>cgi.pay_title</PML_VAL></title>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=ISO-8859-15" />
	<meta http-equiv="Cache-Control" content="max-age=86400" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<style type="text/css" media="handheld">
		body, table, div
		{
			font-size: 1em;
			font-family: "Trebuchet MS",arial,sans-serif;
			background-color: #fff;
			color: #000;
		}
		
		body, table
		{
			text-align: left;
		}
		
		h1
		{
			font-size: 130%;
			white-space: nowrap;
			text-align: center;
			color: #000;
		}
		
		a
		{
			color: #ccff00;
			text-decoration: none;
		}
		
		a:hover
		{
			text-decoration: underline;
		}
		
		.mPoint_Label
		{
			font-weight: bold;
			padding-right: 0.5em;
			padding-top: 0.3em;
		}
		
		.mPoint_Info
		{
			font-weight: normal;
			font-style: italic;
			color: #000;
			text-align: left;
			padding: 0px;
			margin: 0px;	
		}
		
		.mPoint_Status
		{
			color: red;
			padding-top: 0.5em;
			padding-bottom: 0.5em;
		}
		
		table#products tr td
		{
			padding-left: 0.1em;
		}
		
		table#receipt
		{
			margin-top: 0.5em;
			margin-bottom: 0.5em;
		}
		
		div#logo, div#progress, div#mPoint, div#status
		{
			text-align: center;
		}
		
		div#status table tr td, td.status
		{
			vertical-align: middle;
			padding-left: 0.5em;
		}
		
		input.button, input.submit
		{
			border-style: none;
			background-color: #fff;
			color: blue;
			text-decoration: underline;
			margin: 0px 0px 0px 0px;
			padding: 0px 0px 2px 0px;
		}
		
		.center
		{
			text-align: center;
		}
		
		input.number
		{
			-wap-input-format: '*N';
		}
		
		td.mPoint_Number
		{
			padding-right: 0.5em;
			text-align: right;
			vertical-align: bottom;
		}
	</style>
</head>
<body>
	<div id="logo">
		<img src="images/client_logo.jpg" PML_width="cgi.width" PML_height="cgi.height" PML_alt="'- '@cgi.client@' -'" />
	</div>
	<div id="progress" class="mPoint_Info"><PML_VAL>cgi.progress</PML_VAL></div>
	
	<form action="auth.pml" method="post">
		<div>
			<PML_SCRIPT>
			// Payment Gateay is in Test Mode, set default card info
			if (cgi.test = true)
			{
				// American Express
				if (cgi.cardid = 1) { test_cardnum := 3700100000000000; }
				// Dankort
				elsif (cgi.cardid = 2) { test_cardnum := 5019100000000000; }
				// Diners Club
				elsif (cgi.cardid = 3) { test_cardnum := 30401000000000; }
				// EuroCard
				elsif (cgi.cardid = 4) { test_cardnum := 5100100000000000; }
				// JCB
				elsif (cgi.cardid = 5) { test_cardnum := 3528100000000000; }
				// Maestro
				elsif (cgi.cardid = 6) { test_cardnum := 5020100000000000; }
				// MasterCard
				elsif (cgi.cardid = 7) { test_cardnum := 5100100000000000; }
				// VISA
				elsif (cgi.cardid = 8) { test_cardnum := 4711100000000000; }
				// VISA Electron
				elsif (cgi.cardid = 9) { test_cardnum := 4711100000000000; }
				// Unknown Card
				else { test_cardnum := ''; }
				test_expmon := '06';
				test_expyear := 24;
				test_cvc := 684;
			}
			</PML_SCRIPT>
			
			<!-- DIBS Required Data -->
			<input type="hidden" name="merchant" PML_value="cgi.merchant" />
			<input type="hidden" name="callbackurl" PML_value="string.HTMLencode(cgi.callbackurl)" />
			<input type="hidden" name="accepturl" PML_value="string.HTMLencode(cgi.accepturl)" />
			<input type="hidden" name="declineurl" PML_value="string.HTMLencode('https://payment.architrade.com/shoppages/'@cgi.merchant@'/payment.pml')" />
			<input type="hidden" name="amount" PML_value="cgi.amount" />
			<input type="hidden" name="currency" PML_value="cgi.currency" />
			<input type="hidden" name="orderid" PML_value="cgi.orderid" />
			<input type="hidden" name="uniqueoid" PML_value="cgi.uniqueoid" />
			<input type="hidden" name="capturenow" PML_value="cgi.capturenow" />
			<PML_IF COND="cgi.accounts > 0">
				<input type="hidden" name="account" PML_value="cgi.accounts" />
			</PML_IF>			
			<input type="hidden" name="lang" PML_value="cgi.lang" />
			<input type="hidden" name="paytype" PML_value="cgi.paytype" />
			<!-- mPoint Required Data -->
			<input type="hidden" name="width" PML_value="cgi.width" />
			<input type="hidden" name="height" PML_value="cgi.height" />
			<input type="hidden" name="format" PML_value="cgi.format" />
			<input type="hidden" name="PHPSESSID" PML_value="cgi.PHPSESSID" />
			<input type="hidden" name="language" PML_value="cgi.language" />
			<input type="hidden" name="cardid" PML_value="cgi.cardid" />
			<!-- Shared Page Data -->
			<input type="hidden" name="client" PML_value="cgi.client" />
			<!-- Accept Page Data -->
			<input type="hidden" name="title" PML_value="cgi.acc_title" />
			<input type="hidden" name="mpoint" PML_value="cgi.acc_mpoint" />
			<input type="hidden" name="mpoint_width" PML_value="cgi.acc_mpoint_width" />
			<input type="hidden" name="mpoint_height" PML_value="cgi.acc_mpoint_height" />
			<input type="hidden" name="status" PML_value="cgi.acc_status" />
			<input type="hidden" name="txn_id_label" PML_value="cgi.acc_txn_id_label" />
			<input type="hidden" name="order_no" PML_value="cgi.acc_order_no" />
			<input type="hidden" name="order_no_label" PML_value="cgi.acc_order_no_label" />
			<input type="hidden" name="price" PML_value="cgi.acc_price" />
			<input type="hidden" name="price_label" PML_value="cgi.acc_price_label" />
			<input type="hidden" name="sms_receipt" PML_value="cgi.acc_sms_receipt" />
			<input type="hidden" name="sms_receipt_text" PML_value="cgi.acc_sms_receipt_text" />
			<input type="hidden" name="email_receipt" PML_value="cgi.acc_email_receipt" />
			<input type="hidden" name="email_receipt_text" PML_value="cgi.acc_email_receipt_text" />
			<input type="hidden" name="email_url" PML_value="cgi.acc_email_url" />
			<input type="hidden" name="accept_url"  PML_value="cgi.acc_accept_url" />
			<input type="hidden" name="continue" PML_value="cgi.acc_continue" />
			<PML_SCRIPT>
			// Transfer Custom Variables
			foreach(i ; cgi)
			{
				if (string.substring(cgi[i+1], 0, 4) = 'var_')
				{
					out.put('<input type="hidden" name="client_vars_names_'@ i @'" value="'@ cgi[i] @'" />');
					out.put('<input type="hidden" name="client_vars_data_'@ i @'" value="'@ cgi[i+1] @'" />');
				}
			}
			</PML_SCRIPT>
		</div>
		<div>
			<span class="mPoint_Label"><PML_VAL>cgi.pay_sel_card</PML_VAL>:</span>
			<table style="padding-bottom:0.5em;">
			<tr>
			<PML_SWITCH EXPR="cgi.cardid">
				<PML_CASE VALUE="1">
					<td><img src="images/amex.jpg" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- American Express -" /></td>
					<td colspan="3" class="status">&nbsp;American Express</td>
				</PML_CASE>
				<PML_CASE VALUE="2">
					<td><img src="images/dankort.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- Dankort -" /></td>
					<td colspan="3" class="status">&nbsp;Dankort</td>
				</PML_CASE>
				<PML_CASE VALUE="3">
					<td><img src="images/diners.jpg" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- Diners Club -" /></td>
					<td colspan="3" class="status">&nbsp;Diners Club</td>
				</PML_CASE>
				<PML_CASE VALUE="4">
					<td><img src="images/mastercard.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- EuroCard -" /></td>
					<td colspan="3" class="status">&nbsp;EuroCard</td>
				</PML_CASE>
				<PML_CASE VALUE="5">
					<td><img src="images/jcb.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- JCB -" /></td>
					<td colspan="3" class="status">&nbsp;JCB</td>
				</PML_CASE>
				<PML_CASE VALUE="6">
					<td><img src="images/maestro.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- Maestro -" /></td>
					<td colspan="3" class="status">&nbsp;Maestro</td>
				</PML_CASE>
				<PML_CASE VALUE="7">
					<td><img src="images/mastercard.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- MasterCard -" /></td>
					<td colspan="3" class="status">&nbsp;MasterCard</td>
				</PML_CASE>
				<PML_CASE VALUE="8">
					<td><img src="images/visa.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- VISA -" /></td>
					<td colspan="3" class="status">&nbsp;VISA</td>
				</PML_CASE>
				<PML_CASE VALUE="9">
					<td><img src="images/visa_electron.gif" PML_width="cgi.pay_card_width" PML_height="cgi.pay_card_height" alt="- VISA Electron -" /></td>
					<td colspan="3" class="status">&nbsp;VISA Electron</td>
				</PML_CASE>
			</PML_SWITCH>
			</tr>
			</table>
		</div>
		<!-- Credit Card Information -->
		<div><PML_VAL>cgi.pay_info</PML_VAL></div>
		<div class="mPoint_Label">
			<PML_VAL>cgi.pay_card_number</PML_VAL>:<br />
			<PML_IF COND="cgi.test = true">
				<input name="cardno" maxlength="19" PML_value="string.precision(test_cardnum, 0)" size="19" style="-wap-input-format:'*N';" />
			</PML_IF>
			<PML_ELSE>
				<input name="cardno" maxlength="19" value="" size="19" style="-wap-input-format:'*N';" />
			</PML_ELSE>
		</div>
		<div class="mPoint_Label">
			<PML_VAL>cgi.pay_expiry</PML_VAL> <span class="mPoint_Info">(<PML_VAL>cgi.pay_em</PML_VAL>/<PML_VAL>cgi.pay_ey</PML_VAL>)</span>:<br />
			<!-- Construct dropdown for Expiry Month -->
			<select name="expmon">
				<option value="">( <PML_VAL>cgi.pay_em</PML_VAL> )</option>
				<PML_FOR INIT="i:=1" COND="i<=12" INCR="i++">
					<PML_IF COND="i < 10">
						<PML_ASSIGN NAME="n" VALUE="'0'@ i">
					</PML_IF>
					<PML_ELSE>
						<PML_ASSIGN NAME="n" VALUE="i">
					</PML_ELSE>
					
					<PML_IF COND="n = test_expmon">
						<option PML_value="i" selected="selected"><PML_VAL>n</PML_VAL></option>
					</PML_IF>
					<PML_ELSE>
						<option PML_value="i"><PML_VAL>n</PML_VAL></option>
					</PML_ELSE>
			 	</PML_FOR>
		 	</select>
			&nbsp;/&nbsp;
			<!-- Construct dropdown for Expiry Year -->
			<select name="expyear">
				<option value="">( <PML_VAL>cgi.pay_ey</PML_VAL> )</option>
				<PML_FOR INIT="i:=date.get(date.now).year" COND="i<=date.get(date.now).year+25" INCR="i++">
					<PML_IF COND="string.substring(i, 2, 2) = test_expyear">
						<option PML_value="string.substring(i, 2, 2)" selected="selected"><PML_VAL>string.substring(i, 2, 2)</PML_VAL></option>
					</PML_IF>
					<PML_ELSE>
						<option PML_value="string.substring(i, 2, 2)"><PML_VAL>string.substring(i, 2, 2)</PML_VAL></option>
					</PML_ELSE>
			 	</PML_FOR>
		 	</select>
		</div>
		<div class="mPoint_Label">
			<PML_VAL>cgi.pay_cvc</PML_VAL>:<br />
			<PML_IF COND="cgi.test = true">
				<input name="cvc" maxlength="3" PML_value="string.precision(test_cvc, 0)" size="3" style="-wap-input-format:'*N';" />
			</PML_IF>
			<PML_ELSE>
				<input name="cvc" maxlength="3" value="" size="3" style="-wap-input-format:'*N';" />
			</PML_ELSE>
		</div>
		<div class="mPoint_Info"><PML_VAL>cgi.pay_cvc_help</PML_VAL></div>

		<!-- Send Data-->
		<p>
			<input type="submit" PML_value="cgi.pay_submit" />
		</p>
	</form>
</body>
</html>